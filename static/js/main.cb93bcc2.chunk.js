(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(t,e,n){t.exports=n(53)},51:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"VISIBILITY_ALL",function(){return I}),n.d(o,"VISIBILITY_ACTIVE",function(){return k}),n.d(o,"VISIBILITY_COMPLETED",function(){return _});var r=n(1),a=n.n(r),i=n(24),c=n.n(i),s=function(){return a.a.createElement("a",{href:"https://github.com/vikbert/meiri",target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{className:"avatar",style:{position:"absolute",right:"10px",top:"10px",width:"48px"},src:"https://github.githubassets.com/images/modules/site/logos/desktop-logo.png",alt:"avatar"}))},l=n(8),d=n(5),u=n(6),p=n(9),h=n(7),f=n(10),g=n(3),m=n(26),b=n.n(m),v=function(t){function e(){var t,n;Object(d.a)(this,e);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={text:n.props.text||""},n.handleChange=function(t){n.setState({text:t.target.value})},n.handleBlur=function(){n.props.handleInputFieldUpdate(n.state.text.trim())},n.handleSubmit=function(t){"Enter"===t.key&&n.props.handleInputFieldUpdate(n.state.text.trim())},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return a.a.createElement("input",{className:"edit",autoFocus:!0,type:"text",value:this.state.text,onChange:this.handleChange,onBlur:this.handleBlur,onKeyDown:this.handleSubmit})}}]),e}(r.Component),O=function(t){function e(){var t,n;Object(d.a)(this,e);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={starred:n.props.todo.starred},n.onClickHandler=function(){var t=Object(g.a)({},n.props.todo);t.starred=+!n.props.todo.starred,n.props.updateTodo(t,n.props.todo),n.props.toggleItemStarState(t.starred),n.setState({starred:t.starred})},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.state.starred?this.props.todo.completed?"starred starred_completed":"starred":"star";return a.a.createElement("span",{className:t,onClick:this.onClickHandler,dangerouslySetInnerHTML:{__html:this.state.starred?'<svg width="22px" height="44px" viewBox="0 0 22 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"> <g> <path d="M0,0l0,40.5c0,0.28 0.22,0.42 0.48,0.32l10.04,-3.64c0.28,-0.1 0.7,-0.1 0.96,0l10.04,3.64c0.28,0.1 0.48,-0.04 0.48,-0.32l0,-40.5l-22,0ZM14.46,24.08l1.68,5.26c0.08,0.18 0,0.38 -0.16,0.5c-0.14,0.1 -0.36,0.1 -0.52,0l-4.46,-3.24l-4.46,3.24c-0.08,0.06 -0.18,0.1 -0.28,0.1c-0.08,0 -0.18,-0.04 -0.24,-0.1c-0.16,-0.12 -0.24,-0.32 -0.16,-0.5l1.68,-5.26l-4.46,-3.24c-0.14,-0.12 -0.22,-0.32 -0.16,-0.52c0.08,-0.18 0.24,-0.32 0.44,-0.32l5.52,0l1.68,-5.24c0.14,-0.36 0.74,-0.36 0.88,0l1.7,5.24l5.5,0c0.2,0 0.36,0.14 0.44,0.32c0.06,0.2 -0.02,0.4 -0.16,0.52l-4.46,3.24Z"></path> </g> </svg>':'<svg width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"> <g> <path d="M3.74,18 C3.64,18 3.54,17.96 3.46,17.9 C3.28,17.76 3.2,17.54 3.28,17.34 L5.16,11.5 L0.2,7.9 C0.04,7.78 -0.04,7.56 0.02,7.34 C0.1,7.14 0.28,7 0.5,7 L6.64,7 L8.52,1.16 C8.66,0.76 9.34,0.76 9.48,1.16 L11.38,7 L17.5,7 C17.72,7 17.9,7.14 17.98,7.34 C18.04,7.56 17.96,7.78 17.8,7.9 L12.84,11.5 L14.72,17.34 C14.8,17.54 14.72,17.76 14.54,17.9 C14.38,18.02 14.14,18.02 13.96,17.9 L9,14.3 L4.04,17.9 C3.96,17.96 3.84,18 3.74,18 L3.74,18 Z M9,13.18 C9.1,13.18 9.2,13.2 9.3,13.28 L13.3,16.18 L11.78,11.46 C11.7,11.26 11.78,11.04 11.96,10.92 L15.96,8 L11,8 C10.8,8 10.6,7.86 10.54,7.66 L9,2.94 L7.46,7.66 C7.4,7.86 7.22,8 7,8 L2.04,8 L6.04,10.92 C6.22,11.04 6.3,11.26 6.22,11.46 L4.7,16.18 L8.7,13.28 C8.8,13.2 8.9,13.18 9,13.18 L9,13.18 Z"></path> </g> </svg>'}})}}]),e}(r.Component),E=n(27),w=n.n(E),C=n(28),T=n.n(C).a.initializeApp({apiKey:"AIzaSyAsfZp6lD_7HYzU7RNb-ZCUzbsKdhQQtTo",authDomain:"api-project-984120382986.firebaseapp.com",databaseURL:"https://api-project-984120382986.firebaseio.com",projectId:"api-project-984120382986",storageBucket:"api-project-984120382986.appspot.com",messagingSenderId:"984120382986"}).database(),y=w.a.createClass(T),j=function(t,e){return function(n){return y.post("".concat("meiri","/todos/").concat(t.key),{data:t}).then(function(){n(function(t,e){return{type:"UPDATE_TODO_SUCCEED",newTodo:t,oldTodo:e}}(t,e))}).catch(function(t){console.error(t)})}},S=n(13),I="all",k="active",_="completed",x=function(t){return t.todoApp.todos},D=(Object(S.a)(x,function(t){return t.filter(function(t){return!t.completed}).length}),Object(S.a)(x,function(t){return t.filter(function(t){return!t.completed&&t.starred}).length})),L=(Object(S.a)(x,function(t){var e={};return Object.values(o).map(function(n){if(n===I)return e[n]=t.length;if(n===_)return e[n]=t.filter(function(t){return t.completed}).length;if(n===k)return e[n]=t.filter(function(t){return!t.completed}).length;throw new Error("Unknown filter: "+n)}),e}),Object(l.b)(function(t){return{counterActiveStarred:D(t)}},{updateTodo:j})(O)),A=function(t){function e(){var t,n;Object(d.a)(this,e);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={completed:n.props.todo.completed,starred:n.props.todo.starred,editing:!1},n.handleCheckboxChange=function(t){var e=t.target.checked;n.setState({completed:e});var o=Object(g.a)({},n.props.todo,{completed:e});n.props.updateTodo(o,n.props.todo)},n.handleDoubleClick=function(){n.setState({editing:!0})},n.handleToggleItemStarState=function(t){n.setState({starred:t})},n.handleInputFieldUpdate=function(t){if(0===t.length)n.props.deleteTodo(n.props.todo.key);else if(t!==n.props.todo.title){var e=Object(g.a)({},n.props.todo,{title:t});n.props.updateTodo(e,n.props.todo)}n.setState({editing:!1})},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t;return t=this.state.editing?a.a.createElement(v,{editing:this.state.editing,text:this.props.todo.title,handleInputFieldUpdate:this.handleInputFieldUpdate}):a.a.createElement("div",{className:"view"},a.a.createElement("input",{className:"toggle",type:"checkbox",onChange:this.handleCheckboxChange,defaultChecked:this.state.completed}),a.a.createElement("label",{onDoubleClick:this.handleDoubleClick},this.props.todo.title),a.a.createElement(L,{todo:this.props.todo,toggleItemStarState:this.handleToggleItemStarState})),a.a.createElement("li",{className:b()("todo",{starred_todo:this.state.starred},{completed:this.state.completed},{editing:this.state.editing})},t)}}]),e}(r.Component),U=Object(l.b)(null,{updateTodo:j,deleteTodo:function(t){return function(e){var n="".concat("meiri","/todos/").concat(t);T.ref(n).remove(),e(function(t){return{type:"DELETE_TODO",key:t}}(t))}}})(A),N=function(t){function e(){return Object(d.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){(0,this.props.loadTodos)()}},{key:"render",value:function(){var t=this.props.todos;return a.a.createElement("ul",{className:"todo-list"},t.map(function(t){return a.a.createElement(U,{key:t.id,todo:t})}))}}]),e}(a.a.Component),R=n(17),B=Object(S.a)([function(t){return t.todoApp.todos},function(t){return t.todoApp.visibility}],function(t,e){var n=function(t,e){return e.starred-t.starred};switch(e){case k:return t.filter(function(t){return!t.completed}).sort(Object(R.firstBy)(n));case _:return t.filter(function(t){return t.completed}).sort(Object(R.firstBy)(n));case I:return t.sort(Object(R.firstBy)("completed").thenBy(n));default:return t}}),M=Object(l.b)(function(t){return{todos:B(t),loading:t.loading}},{loadTodos:function(){return function(t){return y.fetch("".concat("meiri","/todos"),{context:this,asArray:!0}).then(function(e){t(function(t){return{type:"FETCH_TODOS_SUCCEED",todos:t}}(e))}).catch(function(t){throw t})}}})(N),P=function(t){function e(){var t,n;Object(d.a)(this,e);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={inputText:""},n.handleChange=function(t){n.setState({inputText:t.target.value})},n.handleKeyPress=function(t){if("Enter"===t.key){if(!n.state.inputText.trim())return;var e={id:Date.now(),title:n.state.inputText,starred:0,completed:!1};n.props.createTodo(e),n.setState({inputText:""})}},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return a.a.createElement("input",{className:"new-todo",type:"text",placeholder:"What needs to be done?",value:this.state.inputText,onChange:this.handleChange,onKeyPress:this.handleKeyPress,autoFocus:!0})}}]),e}(r.Component),F=Object(l.b)(null,{createTodo:function(t){return function(e){return y.push("".concat("meiri","/todos"),{data:t}).then(function(n){e(function(t){return{type:"CREATE_TODO_SUCCEED",todo:t}}(t))}).catch(function(t){console.error(t)})}}})(P),V=(n(51),n(52),function(){return a.a.createElement("div",null,a.a.createElement(s,null),a.a.createElement("section",{className:"todoapp"},a.a.createElement("h1",null,"\u6bcf\u65e5\u575a\u6301"),a.a.createElement("header",{className:"header"},a.a.createElement(F,null)),a.a.createElement("section",{className:"main"},a.a.createElement(M,null))),a.a.createElement("span",null,"CSS template powered by todomvc.com\xae"))}),W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}var J=n(11),K=n(22);var Z=n(18),Y=function(){var t=(new Date).toISOString(),e=t.substr(0,4),n=t.substr(5,2),o=t.substr(8,2);return"".concat(e,"-").concat(n,"-").concat(o)},z={todos:[],logs:[],todosChanged:!1,visibility:"all"},X=function(t){return t.todos.filter(function(t){return!1===t.completed})},G=function(t,e){var n=Object(Z.a)(t.todos);return n[n.indexOf(e.oldTodo)]=e.newTodo,n},Q=function(t,e){var n=Y(),o=Object(g.a)({},t.logs),r=o[n]||[],a=r.indexOf(e.newTodo.id);return e.newTodo.completed&&-1===a?(o[n]=[].concat(Object(Z.a)(r),[e.newTodo.id]),o):(!e.newTodo.completed&&a>-1&&r.splice(a,1),o)},$=function(t,e){return t.todos.filter(function(t){return t.key!==e.key})},q=Object(J.c)({todoApp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_TODOS_SUCCEED":return Object(g.a)({},t,{todos:e.todos,loading:!1});case"CREATE_TODO_SUCCEED":return Object(g.a)({},t,{todos:[e.todo].concat(Object(Z.a)(t.todos)),todosChanged:!0});case"UPDATE_TODO_SUCCEED":return Object(g.a)({},t,{todos:G(t,e),logs:Q(t,e),todosChanged:!0});case"DELETE_TODO":return Object(g.a)({},t,{todos:$(t,e),todosChanged:!0});case"REMOVE_COMPLETED_TODOS":return Object(g.a)({},t,{todos:X(t),todosChanged:!0,visibility:"all"});case"UPDATE_VISIBILITY":return Object(g.a)({},t,{visibility:e.visibility,todosChanged:!1});default:return t}}});window.todoStorage={uid:0,fetchTodos:function(){try{var t=localStorage.getItem("MEIRI_TODOS");if(null===t)return;return JSON.parse(t)}catch(e){return}},saveTodos:function(t){try{var e=JSON.stringify(t);localStorage.setItem("MEIRI_TODOS",e)}catch(n){}},fetchTodoLogs:function(){try{var t=localStorage.getItem("MEIRI_LOGS");return null===t?{}:JSON.parse(t)}catch(e){return}},saveTodoLogs:function(t){try{localStorage.setItem("MEIRI_LOGS",JSON.stringify(t))}catch(e){}},saveCurrentDate:function(t){try{localStorage.setItem("MEIRI_CURRENT_DATE",t)}catch(e){}},fetchCurrentDate:function(){try{return localStorage.getItem("MEIRI_CURRENT_DATE")}catch(t){return}}};var tt=function(){var t=function(){var t=window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():void 0;return t?Object(J.d)(Object(J.a)(K.a),t):Object(J.a)(K.a)}(),e=(Y(),window.todoStorage.fetchCurrentDate(),{todoApp:{todos:[],todosChanged:!1,visibility:I}});return Object(J.e)(q,e,t)}();c.a.render(a.a.createElement(l.a,{store:tt},a.a.createElement(V,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/meiri",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/meiri","/service-worker.js");W?(function(t,e){fetch(t).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):H(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):H(e,t)})}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.cb93bcc2.chunk.js.map